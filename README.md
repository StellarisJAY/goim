# Go IM Server

![](https://docs-1257369645.cos.ap-chengdu.myqcloud.com/goim/goim.png)

## 架构设计

- 分层架构，系统分为接入层、逻辑层和存储层。
- **接入层**：由websocket网关和api网关组成，websocket网关主要负责消息下行向客户端推送，API网关提供系统各个功能的REST接口。
- **逻辑层**：各个功能的无状态实现，每个服务都可以冗余部署来提高系统容量。逻辑层与接入层之间通过gRPC通信，逻辑层内部有Kafka消息队列进行解耦。
- **存储层**：目前使用三种数据库来满足系统的不同需求。MySQL主要存储用户信息、群聊信息以及用户关系的记录。Redis负责保存用户的session以及每个用户的收件箱序号。MongoDB存储聊天消息以及其他类型的通知，这些消息都通过MongoDB的Expire机制设置了过期时间，比如聊天记录仅保留7天。

## 主要功能

- [ ] 单聊
- [ ] 好友管理
- [ ] 群聊 以及 群成员管理
- [ ] 离线消息同步
- [ ] 用户多设备接入
- [ ] 图片、文件传输
- [ ] 用户间加密通信
- [ ] 音视频聊天